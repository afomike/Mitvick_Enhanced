<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Execution of the Attack</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
</head>
<body>
    <header>
        <h1>Detection of the Attack</h1>
        <nav>
            <ul>
                <li><a href="{{ url_for('home') }}">Home</a></li>
                <li><a href="{{ url_for('gather_info') }}">Information Gathering</a></li>
                <li><a href="{{ url_for('develop_relationships') }}">Developing Relationships</a></li>
                <li><a href="{{ url_for('exploit_relationships') }}">Exploiting Relationships</a></li>
                <li><a href="{{ url_for('achieve_objective') }}">Achieving the Objective</a></li>
                <li><a href="{{ url_for('retreat') }}">Retreat</a></li>
                <li><a href="{{ url_for('view_entries') }}">View Previous Entries</a></li>
            </ul>
        </nav>
    </header>
    <div class="bg-image"></div>
    <main>
        <section>
            <h2>Detection Form</h2>
            <form id="predictionForm" action="{{ url_for('predict') }}">
                <label for="Time">Time:</label><br>
                <input type="text" id="Time" name="Time"><br><br>
            
                <label for="Protocol">Protocol:</label><br>
                <input type="text" id="Protocol" name="Protocol"><br><br>
            
                <label for="Flag">Flag:</label><br>
                <input type="text" id="Flag" name="Flag"><br><br>
            
                <label for="Family">Family:</label><br>
                <input type="text" id="Family" name="Family"><br><br>
            
                <label for="Clusters">Clusters:</label><br>
                <input type="text" id="Clusters" name="Clusters"><br><br>
            
                <label for="SeedAddress">Seed Address:</label><br>
                <input type="text" id="SeedAddress" name="SeedAddress"><br><br>
            
                <label for="ExpAddress">Exp Address:</label><br>
                <input type="text" id="ExpAddress" name="ExpAddress"><br><br>
            
                <label for="BTC">BTC:</label><br>
                <input type="text" id="BTC" name="BTC"><br><br>
            
                <label for="USD">USD:</label><br>
                <input type="text" id="USD" name="USD"><br><br>
            
                <label for="NetflowBytes">Netflow Bytes:</label><br>
                <input type="text" id="NetflowBytes" name="NetflowBytes"><br><br>
            
                <label for="IPaddress">IP Address:</label><br>
                <input type="text" id="IPaddress" name="IPaddress"><br><br>
            
                <label for="Threats">Threats:</label><br>
                <input type="text" id="Threats" name="Threats"><br><br>
            
                <label for="Port">Port:</label><br>
                <input type="text" id="Port" name="Port"><br><br>
            
                <button type="submit">Predict</button>
            </form>
            
        </section>
    </main>
    <footer>
        <p>&copy; 2024 Enhanced SE Attack Cycle</p>
    </footer>
    <script>
    document.getElementById('predictionForm').addEventListener('submit', function(event) {
    event.preventDefault();

    // Collect all the feature values
    const features = {
        Time: parseFloat(document.getElementById('Time').value),
        Protocol: parseInt(document.getElementById('Protocol').value),
        Flag: parseInt(document.getElementById('Flag').value),
        Family: parseInt(document.getElementById('Family').value),
        Clusters: parseFloat(document.getElementById('Clusters').value),
        SeedAddress: parseInt(document.getElementById('SeedAddress').value),
        ExpAddress: parseInt(document.getElementById('ExpAddress').value),
        BTC: parseFloat(document.getElementById('BTC').value),
        USD: parseFloat(document.getElementById('USD').value),
        NetflowBytes: parseFloat(document.getElementById('NetflowBytes').value),
        IPaddress: parseInt(document.getElementById('IPaddress').value),
        Threats: parseInt(document.getElementById('Threats').value),
        Port: parseFloat(document.getElementById('Port').value)
    };

    // Send the features array to the Flask API
    fetch('/predict', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(features),
    })
    .then(response => response.json())
    .then(data => {
        // Display the prediction result
        alert('Predicted Class: ' + data.prediction);
    })
    .catch((error) => {
        console.error('Error:', error);
    });
});

    </script>
</body>
</html>
